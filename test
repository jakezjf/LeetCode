b=[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1.20E-08 3.33E-05 0.000964679 0.005942649 0.017576217 0.034509514 0.052636316 0.067985513 0.078287436 0.083045681 0.082937903 0.079166813 0.073004794 0.065552067 0.057649045 0.049877081 0.042599409 0.036013423 0.030199795 0.025162689 0.020860038 0.017224951 0.014180046 0.011646511 0.009549449 0.007820694 0.006400002 0.005235229 0.004281934 0.003502677 0.002866199 0.002346573 0.001922413 0.00157615 0.001293396 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ];


k=[118.4393 117.6921 116.9495 116.2117 115.4785 114.7499 114.0259 113.3065 112.5916 111.8812 111.1753 110.4739 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110 110];


n=[6174249.184 5768666.662 6230389.137 6341523.331 6441200.392 6577540.279 5976040.776 6403391.852 6698985.893 6763145.84 6757417.273 7521608.071 7559416.611 7948959.146 8718878.51 8283507.441 8628367.156 8581392.909 8762415.617 10822408.2 10788036.8 9879486.122 11044676.59 9607952.061 8673049.976 8505775.829 8458801.582 9504837.86 8430158.748 8411827.335 8787621.31 8872404.097 8453073.015 9579309.227 10022700.29 10896879.57 11722938.88 12246529.88 12542123.92 13841362.85 13064569.2 13905522.8 11653050.37 13144769.14 12956872.15 12858340.8 14932081.95 6436617.539 11105399.39 8195287.514 7664822.238 9562123.527 10522231.31 9943646.069 10304545.77 10362977.15 9337563.713 9247052.359 8191850.374 8140293.274 7538793.771 6540877.452 6374749.018 5601392.514 5270281.359 5059470.105 4492342.002 4470573.449 4504944.849 4200185.101 3820953.986 4066136.64 3740754.052 3586082.751 3385582.917 3181645.942 2994894.668 2517132.206 2226121.018 2291426.678 1842307.049 1716278.582 1574210.128 1271741.806 1174356.172 937193.5113 706905.1302 612956.6364 521299.5692 449119.6289 1189250.446]; 


m=[7665967.951 7244345.442 7496402.377 7834387.812 7727836.472 8270904.594 7449428.13 7702630.778 8238824.621 8100193.307 8433595.888 8850635.544 8981246.864 9397140.806 9879486.122 9375372.253 9862300.422 9866883.275 9740854.808 11760747.42 11205076.46 10332042.89 10510774.17 9746583.375 8616910.023 8620347.163 8209036.074 9716794.828 8438178.742 8183830.38 8710858.516 8383184.501 8209036.074 9318086.586 9870320.415 10600139.81 11470881.95 11860424.49 12668152.39 13639717.3 12976349.28 13857402,84 11460570.53 12860632.23 12846883.67 12689920.94 14677733.59 6202892.017 10831573.91 7897402.046 7486090.957 9803869.042 10705545.44 9941354.643 10689505.45 10554311.28 9265383.772 9597640.641 7867613.499 8077279.04 7999370.533 6736794.433 6558063.152 5715963.848 5469635.48 5359647 4617224.756 4467136.309 4477447.729 4309027.868 3832411.119 4152065.141 3733879.772 3536817.077 3371834.357 3025828.928 2973126.115 2417455.145 2065721.15 2116132.537 1579938.694 1455055.941 1142276.199 910842.1045 844390.7308 679408.01 552233.8294 445682.4889 313925.4549 266951.208]; 

m0=m';
n0=n';
B=b*1.8; %计算现行人口政策下年龄别生育率,记为向量B




d1=[12.44984 1.58332 0.54903 0.86095 0.47311 0.20598 0.24449 0.22661 0.09096 0.3246 0.337 0.23321 0.1003 0.13945 0.20968 0.15685 0.23915 0.21239 0.43935 0.36813 0.24991 0.54871 0.43079 0.50374 0.32694 0.59545 0.60909 0.49915 0.70291 0.50733 0.81532 0.7423 0.9434 0.67467 0.51476 0.65577 0.60511 0.88755 0.75426 0.90428 0.99015 1.10234 1.2275 1.19099 1.4795 1.14292 1.44357 2.56088 1.29463 2.11052 2.12619 2.9916 2.86785 3.11982 3.36051 3.40799 3.9412 4.10437 4.68148 5.09535 5.91741 4.68597 7.25054 9.72275 9.99064 10.31572 12.06464 11.80985 14.94018 18.71142 20.2902 20.79163 23.63313 25.82687 29.33152 32.58654 32.25789 44.11785 46.49391 42.58775 52.62696 59.73726 61.38434 71.20209 79.95427 72.51913 89.04526 99.37662 118.90221 117.21207 156.1257634];


d2=[8.85809 1.56957 0.95064 0.86802 0.70085 0.47771 0.57248 0.29856 0.34356 0.61927 0.46988 0.4138 0.29731 0.47707 0.51739 0.29271 0.45193 0.57819 0.48735 0.75171 0.88532 1.41973 1.12784 0.84013 0.81089 0.96146 1.08366 1.07762 0.75742 1.65891 1.3036 1.73088 1.43995 1.75 1.5438 2.01408 1.56224 1.46368 1.74175 2.18403 2.29059 2.73017 2.52196 2.58796 3.0175 3.04082 2.94246 4.12824 3.7722 4.74966 5.27049 5.04544 4.82005 4.71728 5.57793 6.27475 7.20838 6.63975 8.49921 9.76172 10.01252 10.03391 11.57389 14.85008 13.5001 18.39465 18.93617 18.39092 24.13368 24.04701 28.38475 31.89455 33.1155 37.32993 37.27515 49.54132 51.13589 53.60277 57.54084 61.60462 70.64919 79.51827 83.46304 99.94565 79.12245 92.36785 113.62503 120.47424 119.34161 136.7385 172.3682691]; 

s1=(1000-d1)/1000; %计算女性年龄别存活率
s2=(1000-d2)/1000; %计算男性年龄别存活率

M1=eye(90); %生成90维单位矩阵Ml
for i = 1:90
	M1(i,:)=M1(i,:)*s1(1,i);
end

%通过循环语句将女性年龄别存活率赋值到Ml矩阵对角线元素

h=zeros(91,1);% 生成零矩阵 h
N1=[B;M1];
L1=[N1,h];
i=1;
X(:,i)=L1*n0;
X(1,i)=X(1,i)*100/(100+k(i));

for i=2:51
	X(:,i)=L1*X(:,i-1);
	X(1,i)= X(1,i)*100/(100+k(i));
end

%计算未来50年女性预测人口数,记为矩阵X

M2=eye(90);

for i=1:90
 	M2(i,:)=M2(i,:)*s2(1,i);
end
h0=zeros(1,90);

N2=[h0;M2];
L2=[N2,h];
i=1;
Y(:,i)=L2 * m0;
Y(1,i)=X(1,i)*k(i)/100;
for i=2:51
	Y(:,i)=L2*Y(:,i-1);
	Y(1,i)=X(1,i)*k(i)/100;
end

%计算未来50年男性预测人口数,记为矩阵Y

Z=X+Y;%#算预测分年龄人口总数

T=sum(Z); %计算预测人口总数

C1=sum(Z([1:15],:)); % 计算0-14岁人口数

C2=sum(Z([16:65],:));% 计算 15—64 岁人口数

C3=sum(Z([66:91],:)); %计算65岁及以上人口数

F1=C1./T; %计算预测少年儿童人口系数

F2=C2./T; %计算预测青壮年人口系数

F3=C3./T; %计算预测老年人口系数

A1=sum(X); %计算预测女性人口总数

A2=sum(Y); %计算预测男性人口总数

D1=(C1 +C3)./C2; %计算预测人口抚养比
g1=2010:2060;
subplot(2,1,1 );plot(g1 ,T,'ro')

legend('人口总数') %加图例

xlabel('年份') %Wx轴标签

ylabel('人口数(单位:人)') %轴标签

grid on %加网格

subplot(2,1,2);plot(g1,C2,'y+',g1,C1,'c*',g1,C3)

legend('青壮年人口数','少年儿童人口数','老年人口数')

xlabel('年份')

ylabel('单位;人)')

grid on

%绘制人口总数与各年龄阶段人口数的两个子图

subplot(3,1,1 );plot(g1,F2,'b*',g1 ,F1 ,g1,F3,'r.')

legend('青壮年人口系数少年儿童人口系数','老年人口系数')

xlabel('年份')

ylabel('比例')

